# Requirements Specification

This document is the requirements specification for an issue-tracking desktop application that is shared and used by the Contractor and the Vendor. Requirements are divided into Functional Requirements and Technical Requirements, and each requirement is assigned a requirement ID.

## 1. System Overview and Assumptions

This system is a desktop application for managing issues for a single project shared between the Contractor and the Vendor, replacing the current operation of “one Excel file per project, with categories split by sheet,” while primarily aiming to keep exchanges of comments per issue easy to review as a log (FR-001).

This system targets only one project per application launch. The project data folder is specified at startup via a configuration file or a startup selection screen. If specified via the selection screen, the path is saved to the configuration file and used as the default value on the next startup. The system does not provide a feature to switch between multiple projects after startup (FR-002). Both the Contractor and the Vendor use this system to view and update issues within the same project, while assuming that the Contractor is the master party and holds the authority to close or reject issues (FR-003).

This system does not provide user management features to identify/manage individual users, nor authentication mechanisms per user. At startup, the application determines the company mode based on the presence of a Contractor-only configuration file placed at a designated path and its contents. If the Contractor-only configuration file exists, the application compares the shared password stored in that file with the password entered by the user; it starts in Contractor mode only when they match, and terminates with an error if they do not match. If the Contractor-only configuration file does not exist, the application starts in Vendor mode. User names recorded in comments and issue creator names are entered manually by the user each time in an input field, regardless of the mode (FR-004). The Contractor-only configuration file can be generated via an initialization command (FR-024).

Data synchronization and conflict resolution between the Contractor and the Vendor are handled outside the application using tools such as git. The responsibility of this system is to directly read and write only the JSON files that exist in a local or shared folder (FR-005).

As assumptions for list display and usability, the default number of issues displayed per page is 20 (FR-022). The assumed usage scale is about 10 users per company, with the number of issues and comments on the order of several hundred, and the system is assumed to satisfy performance requirements for this scale (TR-012). Also, as a data synchronization operation using git, it is assumed that the Contractor deploys data after the morning meeting and after the end-of-day meeting, and the Vendor deploys data before noon and after the end-of-day meeting; the system design is based on this operation rule (TR-013).

## 2. Functional Requirements

### 2.1 List of Functional Requirements

| Requirement ID | Requirement                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| -------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| FR-001         | The system manages issues for a single project shared between the Contractor and the Vendor, primarily aiming to make the exchange of comments per issue easy to review as a log.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| FR-002         | The system targets only one project per application launch. The project data folder is specified at startup via a configuration file or a startup selection screen. If the data folder path is specified in the startup selection screen, it is saved to the configuration file and used as the default value on the next startup. The system does not provide a feature to switch between multiple projects after startup.                                                                                                                                                                                                                                                                                                                                                                                                                               |
| FR-003         | The system assumes that the Contractor and the Vendor share and use issues of the same project, positions the Contractor as the master, and allows only the Contractor to close or reject issues.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| FR-004         | The system does not provide user management or authentication mechanisms for individual users. The application determines the operating mode at startup based on whether a Contractor-only configuration file exists at a specified path. If the Contractor-only configuration file exists, the application compares the shared password stored in the configuration file with the password entered by the user, starts in Contractor mode only when they match, and terminates with an error if they do not match. If the Contractor-only configuration file does not exist, the application starts in Vendor mode. User names recorded in comments and issue creator names are entered manually by the user each time in an input field, in either mode. The Contractor-only configuration file can be generated by an initialization command (FR-024). |
| FR-005         | The system does not implement internal data synchronization or conflict resolution between the Contractor and the Vendor; it directly reads and writes only the JSON files on a local or shared folder, assuming that inter-organization synchronization is performed using external tools such as git.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| FR-006         | The system data structure has multiple categories under a single project. A category is treated as a unit corresponding to a sheet in the current Excel file. After selecting a category, the user can view the list of issues and issue details belonging to that category.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| FR-007         | The system allows issues to be newly created, viewed, updated, and treated as finished via closing or rejection. Each issue holds at least an issue identifier, category name, title, description, status, priority, originating company, created timestamp, updated timestamp, assignee name, and a requested response deadline.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| FR-008         | The system allows the user to enter a requested response deadline when drafting or editing an issue. The requested response deadline is saved as part of the issue information and can be referenced at least on the issue list and issue detail screens.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| FR-009         | The system uses eight status values: “新規”, “対応中”, “問い合わせ中”, “保留”, “差し戻し”, “完了”, “クローズ”, and “却下”. “新規” means immediately after creation; “対応中” means one of the parties is working; “問い合わせ中” means an inquiry is being made to a third party other than the Contractor or the Vendor; “保留” means the work is temporarily paused; “差し戻し” means the creator side requests reconsideration of the completion contents from the responding side; “完了” means the responding side has completed work and is waiting for the creator’s confirmation; “クローズ” means a finished state where everyone including the creator agrees the work is completed; “却下” means a finished state where everyone judges the issue is unnecessary.                                                                                                                                |
| FR-010         | The system treats “新規”, “対応中”, “問い合わせ中”, “保留”, “差し戻し”, and “完了” as open states, and “クローズ” and “却下” as finished states. Issues in finished states are not re-opened; if a new issue is needed, it is handled by creating a new issue.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| FR-011         | In Contractor mode, the user can change an issue’s status between all statuses. In addition to transitions between open states, the user can change from any open state to “完了”, “クローズ”, or “却下”. No transition from a finished state to an open state is performed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| FR-012         | In Vendor mode, the user can change status between all statuses that belong to open states.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| FR-013         | In Vendor mode, the user cannot change an issue’s status to “クローズ” or “却下”, and cannot change the status of an issue that is already in a finished state.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| FR-014         | In Contractor mode, the user can create a new issue, and the Contractor is recorded as the originating company. In Vendor mode, the user can also create a new issue, and the Vendor is recorded as the originating company.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| FR-015         | The system has a function to accumulate comments for an issue in chronological order. Each comment holds a comment identifier, body text, poster name, the poster’s company classification (Contractor or Vendor), and the posted timestamp. The comment body can be handled as text using Markdown notation, and the body size per comment is limited to 100KB. Comments are append-only as a log; after registration, editing or deletion is not possible from either Contractor mode or Vendor mode. Because the update timestamp for comments is not changed after posting, it is considered the same as the posted timestamp.                                                                                                                                                                                                                        |
| FR-016         | In both Contractor mode and Vendor mode, the system allows adding new comments to viewable issues. Only appending comments is permitted; no comment edit or delete operations are provided.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| FR-017         | The system can display an issue list per category. The list shows at least the issue title, current status, originating company, updated timestamp, and requested response deadline. The system allows simple filtering or sorting using status, updated timestamp, and requested response deadline.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| FR-018         | The system allows adding and deleting category structures and changing the folder structure under the project only in Contractor mode, and does not allow operations to change the category structure from Vendor mode.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| FR-019         | To track operation history for issues and comments, the system stores created and updated timestamps for issues and comments, and allows the user to confirm at least the latest updated timestamp on the screen. Because comments are not edited, a comment’s updated timestamp is considered the same as its created timestamp.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| FR-020         | In both Contractor mode and Vendor mode, the system targets all issues that exist within the same project for viewing, and does not introduce differences in issue visibility by company.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| FR-021         | The system provides a function to associate attachments with each comment, allowing multiple attachments to be registered for a single comment. Attachments can be referenced and saved from the issue detail screen, and the existence and number of attachments can be understood by the user along with the comment display.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| FR-022         | In issue list display per category, the default number of items displayed per page is 20. If more than 20 issues exist, the list is split and displayed via paging.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| FR-023         | The system is designed under the operational assumption that the timing of data synchronization using tools such as git is after the morning meeting and after the end-of-day meeting on the Contractor side, and before noon and after the end-of-day meeting on the Vendor side, and must satisfy the aforementioned performance and consistency requirements under this assumption.                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| FR-024         | The system provides an initialization command that generates a Contractor-only configuration file (auth/contractor.json). When the user executes `ratta.exe init contractor`, the system accepts shared password input (including confirmation input) and saves it to the configuration file as encrypted information. If the configuration file already exists, it is not overwritten and the system terminates with an error unless an explicit overwrite option (e.g., `--force`) is specified.                                                                                                                                                                                                                                                                                                                                                        |

## 3. Technical Requirements

### 3.1 List of Technical Requirements

| Requirement ID | Requirement                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| -------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| TR-001         | The system is implemented as a desktop application using web technologies such as Electron or Wails, runs as a local application on each user’s Windows PC, and does not assume a server-resident web application or a browser-based system.                                                                                                                                                                                                                                            |
| TR-002         | To persist issue data, the system adopts a method of saving each issue as a single JSON file, with a one-issue-per-file structure.                                                                                                                                                                                                                                                                                                                                                      |
| TR-003         | The system uses a directory structure where category subfolders are placed directly under the project’s data root folder, and individual issue JSON files are stored under each category subfolder. The path to the data root folder is specified at startup via a configuration file or a selection screen. If specified via the selection screen, that path is saved to the configuration file.                                                                                       |
| TR-004         | The issue JSON files handled by the system follow an agreed JSON schema, including fields such as issue identifier, category name, title, description, status, priority, originating company, created timestamp, updated timestamp, requested response deadline, and a comment array. The schema is assumed to be fixed at this stage while allowing future extensions.                                                                                                                 |
| TR-005         | When updating an issue JSON file, the system does not overwrite the file directly. Instead, it writes to a temporary file and then replaces the original file name using a file-system rename operation, reducing the risk of file corruption due to abnormal termination during writing.                                                                                                                                                                                               |
| TR-006         | The system does not implement an in-application locking mechanism for editing issue files. If updates from multiple terminals conflict, resolution is delegated to merge processing by external version control tools such as git. On the application side, the responsibility is limited to correct reading and writing of JSON files.                                                                                                                                                 |
| TR-007         | At startup, the system determines Contractor mode or Vendor mode based on whether a Contractor-only configuration file exists at a specified path and the result of comparing shared password information stored in that file. Generation of the Contractor-only configuration file is performed by the initialization command (FR-024). Depending on the mode, the system controls UI display, status changes, etc., and realizes the access control defined in FR-011 through FR-018. |
| TR-008         | The JSON files saved by the system use UTF-8 as the character encoding, and use ISO 8601 format including time zone information for date/time representation, so that no confusion arises in data exchange between the Contractor and the Vendor or when viewing differences via git.                                                                                                                                                                                                   |
| TR-009         | The system can operate standalone even in an on-premises environment that is not connected to the internet, has no dependency on external cloud services or external APIs, and assumes operation on Windows desktop environments of the Contractor and the Vendor.                                                                                                                                                                                                                      |
| TR-010         | The system does not include built-in backup or restore functionality for issue data. Preservation of the issue JSON files is delegated to existing backup operations for file servers or local storage, limiting the application’s responsibility scope to creating and updating data.                                                                                                                                                                                                  |
| TR-011         | The system saves attachments added to comments as separate files on the file system. Under the same category folder as each issue JSON file, it creates a subfolder whose name includes the issue identifier (e.g., `<issue_id>.files`) and stores attachments inside it. Comment data holds a relative path or file name to identify attachments within the issue, and the design prevents variations in how attachment locations are represented.                                     |
| TR-012         | The system is designed to satisfy performance requirements assuming a scale of about 10 users per company and several hundred issues and comments in total, ensuring that category-based issue list display (20 items per page) and issue detail display can be performed with response times that pose no practical problems at this scale.                                                                                                                                            |
| TR-013         | The system assumes data synchronization operations by the Contractor and the Vendor using tools such as git, where the Contractor side deploys data after the morning meeting and after the end-of-day meeting, and the Vendor side deploys data before noon and after the end-of-day meeting. Based on this synchronization timing assumption, the system maintains data consistency through git merges and conflict resolution.                                                       |

These functional and technical requirements constitute the requirements specification of this system, and subsequent requirements definition and design phases shall maintain traceability with each requirement ID.
